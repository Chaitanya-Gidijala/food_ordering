<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragments/layout}">

<head>
    <th:block th:replace="~{fragments/layout :: head}"></th:block>
</head>

<body>

    <div layout:fragment="content" class="admin-layout">
        <!-- Sidebar -->
        <div th:replace="~{fragments/admin_sidebar :: sidebar}"></div>

        <!-- Main Content -->
        <div class="admin-content">
            <div class="page-header">
                <h2 class="page-title">Order Details</h2>
                <a href="/admin/orders" class="btn-secondary"><i class="fas fa-arrow-left"></i> Back to Orders</a>
            </div>

            <div class="food-item-card" style="padding: 2rem; max-width: 800px; margin: 0 auto;">
                <div
                    style="display: flex; justify-content: space-between; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                    <div>
                        <h3 th:text="${'Order #' + order.id}">Order #1</h3>
                        <p class="text-light" style="margin: 0;"
                            th:text="${#temporals.format(order.orderDate, 'dd MMMM yyyy, HH:mm')}">Date</p>
                    </div>
                    <div style="text-align: right;">
                        <span th:text="${order.status}"
                            th:class="${'badge ' + (order.status == 'COMPLETED' ? 'badge-success' : (order.status == 'PENDING' ? 'badge-warning' : 'badge-danger'))}"
                            th:style="${order.status == 'PENDING' ? 'color: #d97706; font-weight:600; font-size: 1.1rem;' : (order.status == 'COMPLETED' ? 'color: #059669; font-weight:600; font-size: 1.1rem;' : '')}">
                            PENDING
                        </span>
                        <div style="margin-top: 0.5rem; font-weight: bold; font-size: 1.2rem; color: var(--brand-dark);"
                            th:text="${'Total: ₹' + order.totalAmount}">Total: ₹100</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                    <div>
                        <h4 style="margin-bottom: 0.5rem; color: var(--text-color);">Customer Details</h4>
                        <p style="margin: 0;"><strong>Username:</strong> <span
                                th:text="${order.user.username}">User</span></p>
                        <p style="margin: 0;"><strong>Email:</strong> <span
                                th:text="${order.user.email}">user@example.com</span></p>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 0.5rem; color: var(--text-color);">Shipping & Payment</h4>
                        <p style="margin: 0; white-space: pre-wrap;" th:text="${order.shippingAddress}">Address</p>
                        <p style="margin-top: 0.5rem; color: var(--text-light);" th:text="${order.description}">Payment
                        </p>
                    </div>
                </div>

                <h4 style="margin-bottom: 1rem; color: var(--text-color);">Order Items</h4>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${order.orderItems}">
                            <td>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <div th:if="${item.menuItem.imageUrl != null}"
                                        style="width: 40px; height: 50px; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
                                        <img th:src="${item.menuItem.imageUrl}" style="max-width: 100%; max-height: 100%;">
                                    </div>
                                    <span th:text="${item.menuItem.name}">Food Item Title</span>
                                </div>
                            </td>
                            <td th:text="${'₹' + item.price}">₹100</td>
                            <td th:text="${item.quantity}">1</td>
                            <td th:text="${'₹' + (item.price * item.quantity)}">₹100</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</body>

</html>
