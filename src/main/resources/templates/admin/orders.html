<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragments/layout}">

<head>
    <th:block th:replace="~{fragments/layout :: head}"></th:block>
</head>

<body>

    <div layout:fragment="content" class="admin-layout">
        <!-- Sidebar -->
        <div th:replace="~{fragments/admin_sidebar :: sidebar}"></div>

        <!-- Main Content -->
        <div class="admin-content">
            <div class="page-header">
                <h2 class="page-title">Manage Orders</h2>
                <!-- Filter/Search could go here -->
            </div>

            <table class="table">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>User</th>
                        <th>Date</th>
                        <th>Total / Method</th>
                        <th>Status</th>
                        <th>Address</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="order : ${orders}">
                        <td th:text="${order.id}">1</td>
                        <td th:text="${order.user.username}">User</td>
                        <td th:text="${#temporals.format(order.orderDate, 'dd-MM-yyyy HH:mm')}">Date</td>
                        <td>
                            <div th:text="${'₹' + order.totalAmount}" style="font-weight: bold;">₹50.00</div>
                            <small th:text="${order.description}" style="color: #666;">CC</small>
                        </td>
                        <td>
                            <span th:text="${order.status}"
                                th:class="${'badge ' + (order.status == 'COMPLETED' ? 'badge-success' : (order.status == 'PENDING' ? 'badge-warning' : 'badge-danger'))}"
                                th:style="${order.status == 'PENDING' ? 'color: #d97706; font-weight:600;' : (order.status == 'COMPLETED' ? 'color: #059669; font-weight:600;' : '')}">
                                PENDING
                            </span>
                        </td>
                        <td>
                            <div style="font-size: 0.85rem; max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                                th:title="${order.shippingAddress}" th:text="${order.shippingAddress}">Address</div>
                        </td>
                        <td>
                            <a th:href="@{/admin/orders/{id}(id=${order.id})}" class="btn-primary"
                                style="padding: 0.2rem 0.6rem; font-size: 0.8rem;">View</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</body>

</html>
